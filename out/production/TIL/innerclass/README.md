# 내부 클래스(inner class)
___
내부 클래스(inner class)는 말 그대로 `클래스 내부에 선언한 클래스` 이다.  
내부 클래스는 선언하는 위치나 예약어에 따라 크게 네가지로 분류할 수 있다.
1. 인스턴스 내부 클래스
2. 정적(static) 내부 클래스
3. 지역(local) 내부 클래스
4. 익명(anonymous) 내부 클래스
___

### 1. 인스턴스 내부 클래스
인스턴스 내부 클래스(instance inner class)는 인스턴스 변수를 선언할 때와 같은 위치에 선언하고, 외부 클래스 내부에서만 생성하여 사용하는 객체를 선언할 때 쓴다.  
`인스턴스 내부 클래스는 외부 클래스 생성 후 생성된다.` 그러므로 외부 클래스를 먼저 생성하지 않고 인스턴스 내부 클래스를 사용할 수는 없다.

<br>

### 2. 정적 내부 클래스
인스턴스 내부 클래스는 외부 클래스가 먼저 생성되어야 생성할 수 있기 때문에 정적 변수나 정적 메서드를 사용할 수 없다. 그래서 내부 클래스가 외부 클래스 생성과 무관하게 사용할 수 있어야 하고 정적 변수도 사용할 수 있어야 한다면 정적 내부 클래스(static inner class)를 사용하면 된다.  

|         정적 내부 클래스 메서드          |                                                  변수 유형                                                  |         사용 가능 여부          |
|:------------------------------:|:-------------------------------------------------------------------------------------------------------:|:-------------------------:|
|    일반 메서드<br/>void inTest()    | 외부 클래스의 인스턴스 변수(num)<br/>외부 클래스의 정적 변수(sNum)<br/>정적 내부 클래스의 인스턴스 변수(inNum)<br/>정적 내부 클래스의 정적 변수(sInNum) | X<br/>O<br/>O<br/>O<br/>X |
| 정적 메서드<br/>static void sTest() |                                          외부 클래스의 인스턴스 변수(num)<br/>외부 클래스의 정적 변수(sNum)<br/>정적 내부 클래스의 인스턴스 변수(inNum)<br/>정적 내부 클래스의 정적 변수(sInNum)                                           |    X<br/>O<br/>X<br/>O    |

<br>
  
### 3. 지역 내부 클래스
지역 내부 클래스는 메서드 내부에 클래스를 정의하여 사용한다.

<br>

### 4. 익명 내부 클래스
`LocalInnerTest.java`를 보면,
```
class Outer {
...
    Runnable getRunnable(int i) {
    ...
    class MyRunnable implements Runnable {
        ...
        
        @Override
        public void run() {
            ...
        }
    }
    return new MyRunnable();
  }
}
```
지역 내부 클래스 MyRunnable을 선언했지만, 이 클래스 이름을 사용하는 곳은 마지막에 클래스를 생성하여 반환할 때 뿐이다. 그래서 `AnonymousInnerTest.java` 처럼 이름을 생략한 Runnable 인터페이스를 바로 생성하여 반환하는 익명 클래스 형식으로 선언한다.  
익명 내부 클래스는 변수에 직접 대입하는 경우도 있고 메서드 내부에서 인터페이스나 추상 클래스를 구현하는 경우도 있다.

|      종류       |             구현 위치             | 사용할 수 있는<br/>외부 클래스 변수  |                         생성 방법                         |
|:-------------:|:-----------------------------:|:-----------------------:|:-----------------------------------------------------:|
 |  인스턴스 내부 클래스  |       외부 클래스 멤버 변수와 동일        | 외부 인스턴스 변수<br/>외부 전역 변수 |               외부 클래스를 먼저 만든 후 내부 클래스 생성               |
 |   정적 내부 클래스   |       외부 클래스 멤버 변수와 동일        |        외부 전역 변수         |                    외부 클래스와 무관하게 생성                    |
|   지역 내부 클래스   |          메서드 내부에 구현           | 외부 인스턴스 변수<br/>외부 전역 변수 |                     메서드를 호출할 때 생성                     |
|   익명 내부 클래스   | 메서드 내부에 구현<br/>변수에 대입하여 직접 구현 | 외부 인스턴스 변수<br/>외부 전역 변  | 메서드를 호출할 때 생성되거나, 인터페이스 타입 변수에 대입할 때 new 예약어를 사용하여 생성 |

<br>

> 참고문헌 : Do it! 자바 프로그래밍 입문 - 박은종